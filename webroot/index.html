<!DOCTYPE html>
<!-- release v4.4.8, copyright 2014 - 2018 Kartik Visweswaran -->
<!--suppress JSUnresolvedLibraryURL -->
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Krajee JQuery Plugins - &copy; Kartik</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
    <link href="/app/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/app/themes/explorer-fa/theme.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="/app/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="/app/js/fileinput.js" type="text/javascript"></script>
    <script src="/app/js/locales/fr.js" type="text/javascript"></script>
    <script src="/app/js/locales/es.js" type="text/javascript"></script>
    <script src="/app/themes/explorer-fa/theme.js" type="text/javascript"></script>
    <script src="/app/themes/fa/theme.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
<div class="container kv-main">
    <div class="page-header">
        <h1>Bootstrap File Input Example
            <small><a href="https://github.com/kartik-v/bootstrap-fileinput-samples"><i
                    class="glyphicon glyphicon-download"></i> Download Sample Files</a></small>
        </h1>
    </div>
      <hr>
    <form enctype="multipart/form-data">
        <label>File Input</label>
        <div class="file-loading">
            <input id="fileUpload" name="file-bg[]" type="file" multiple>
        </div>
         <div id="errorBlock" class="help-block"></div>
    </form>
    <hr>
    <br>
    <div id="resultBlock" class="help-block"></div>
</div>
</body>
<script>
/*	$("#test-upload").fileinput({
        theme: 'explorer',
        uploadUrl: '/api/docs/',
        showPreview: false,
        filebatchpreupload: function (d){console.log(d) ;},
        fileimageuploaded: function (d){console.log(d); },
        slugCallback: function (filename) {
            return filename.replace('(', '_').replace(']', '_');
        },
      });
*/    
    $(document).ready(function () {
        $("#fileUpload").fileinput({
            'theme': 'explorer',
            'uploadUrl' : '/api/docs/',
            'showPreview': false,
            'elErrorContainer': '#errorBlock'
          });
    		$('#fileUpload').on('fileuploaded', function(event, data, previewId, index) {
    					console.log('File uploaded triggered');
    					console.log(data);
    					var res=data.response[0];
    				 $("#resultBlock").append("<div><a href=\"/api/doc/"+res.Key+"\"> "+res.Name+" </a>: "+res.Key+"</div>");
					});

				$('#fileUpload').on('filebatchuploadsuccess', function(event, data, previewId, index) {
    					console.log('filebatchuploadsuccess');
    					console.log(data);
					});        
            
    });
    
</script>
</html>